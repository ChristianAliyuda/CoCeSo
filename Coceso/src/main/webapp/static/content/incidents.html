<!DOCTYPE html>
<!--
/**
 * CoCeSo
 * Client HTML Incident list content
 * Copyright (c) WRK\Daniel Rohr
 *
 * Licensed under The MIT License
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2013 Daniel Rohr
 * @link          https://sourceforge.net/projects/coceso/
 * @package       coceso.client.html
 * @since         Rev. 1
 * @license       MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Dependencies:
 *	coceso.client.css
 */
-->
<html lang="en">
  <head>
    <title>Incidents / List</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <link rel="stylesheet" href="../css/coceso.css" type="text/css" />
  </head>
  <body>
    <div class="alert alert-danger"><strong>No direct access</strong><br/>Use the main interface.</div>

    <div class="ajax_content">
      <div class="ui-tabs" data-bind="buttonset: {}, visible: showTabs">
        <input id="tab_emergency" type="radio" name="tab" value="0" data-bind="checked: selectedTab" /> <label for="tab_emergency">Emergency</label>
        <input id="tab_tasks" type="radio" name="tab" value="1" data-bind="checked: selectedTab" /> <label for="tab_tasks">Tasks</label>
        <input id="tab_relocations" type="radio" name="tab" value="2" data-bind="checked: selectedTab" /> <label for="tab_relocations">Relocation</label>
      </div>

      <ul data-bind="foreach: filtered, accordion: accordionOptions, accordionRefresh: filtered">
        <li data-bind="droppable: {drop: assignUnitList}">
          <h3 class="clearfix" data-bind="css: {incidents_open: isNew() || isOpen()}">
            <span class="incidents_priority" data-bind="text: priority, css: {incidents_blue: blue}, style: {fontSize: (priority() / 300 + 0.5) + 'em'}"></span>

            <span data-bind="text: enableBO() ? (bo.info() ? bo.info() : 'No BO') : (ao.info() ? ao.info() : 'No AO') "></span>
            <span class="incidents_ao clearfix" data-bind="visible: enableBO() && ao.info()">
              <span class="ui-icon ui-icon-arrowthick-1-e"></span>
              <span data-bind="text: ao.info"></span>
            </span>
          </h3>
          <div>
            <p data-bind="visible: bo.info() && enableBO()">
              <span class="key">BO</span>
              <span data-bind="text: bo.info"></span>
            </p>

            <p data-bind="visible: ao.info">
              <span class="key">AO</span>
              <span data-bind="text: ao.info"></span>
            </p>

            <p data-bind="visible: info">
              <span class="key">Info</span>
              <span data-bind="text: info"></span>
            </p>

            <p>
              <span class="key">State</span>
              <span data-bind="text: state"></span>
            </p>

            <!-- ko foreach: units.units -->
            <p>
              <span class="key" data-bind="text: call"></span>
              <span data-bind="text: taskState"></span>
            </p>
            <!-- /ko -->

            <p><button class="ui-button ui-state-default ui-corner-all" data-bind="click: openForm">Edit</button></p>
          </div>
        </li>
      </ul>
    </div>
  </body>
</html>
